{% block _Accordion_children_widget %}
    {% set children = form.parent.vars.data.children ?? [] %}

    <div data-controller="admin--sortable"
         data-admin--sortable-resource-name-value="accordion_item"
         data-admin--sortable-param-name-value="order_num"
         class="accordion-item-list">

        <button type="button"
        class="btn btn-primary mb-3"
        data-action="admin--modal#load"
        data-controller="admin--modal"
        data-bs-toggle="modal"
        data-bs-target="#modal"
        data-class="AccordionItem"
        data-path="accordion_item"
        data-admin--modal-url="{{ adminUrlGenerator
            .setController('App\\Controller\\Admin\\Crud\\AccordionItemCrudController')
            .setAction('new')
            .unset('entityId')
            .set('parent', form.parent.vars.data.id)
            .generateUrl() }}"
        data-admin--modal-title="{{ 'Add Accordion Item'|trans }}">
            {{ 'Add Accordion Item'|trans }}
    </button>

        {% if children|length > 0 %}
            <ul data-sortable="true" class="list-unstyled">
                {% for child in children %}
                    <li data-id="{{ child.id }}" data-sortable-update-url="{{ path('order', { id: child.id }) }}">
                        <div class="item d-flex justify-content-between align-items-center p-2 border rounded mb-2">
                            <span>{{ child.name }}</span>
                            <div>
                                <a href="{{ path('admin_accordion_item_edit', { entityId: child.id }) }}"
                                   class="btn btn-sm btn-outline-secondary me-2">
                                    {{ 'Edit'|trans }}
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-danger"
                                   data-action="delete"
                                   data-delete-url="{{ path('admin_accordion_item_delete', { entityId: child.id }) }}"
                                   onclick="if(confirm('{{ 'Are you sure you want to delete this item?'|trans }}')) { const form = document.getElementById('delete-form'); form.setAttribute('action', this.getAttribute('data-delete-url')); form.submit(); } return false;">
                                    {{ 'Delete'|trans }}
                                </a>
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>{{ 'No accordion items found.'|trans }}</p>
        {% endif %}
    </div>

    {% include 'admin/modules/modal.html.twig' %}
{% endblock %}